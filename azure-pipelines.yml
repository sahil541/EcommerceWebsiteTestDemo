# ASP.NET Core
# Build and test ASP.NET Core projects targeting .NET Core.
# Add steps that run tests, create a NuGet package, deploy, and more:
# https://docs.microsoft.com/azure/devops/pipelines/languages/dotnet-core

trigger:
- main

schedules:
- cron: "30 14 * * 5"  # This is every Friday at 2:30 PM UTC, which is 8:00 PM IST
  displayName: 'Weekly Friday 8 PM IST Pipeline Run'
  branches:
    include:
    - main
  always: true  # Ensures the pipeline runs even if there are no code changes

# Define parameters
parameters:
  - name: buildConfiguration
    displayName: 'Build Configuration'
    type: string
    default: 'Release'
    values:
    - 'Debug'
    - 'Release'

  - name: headlessMode
    displayName: 'Run tests in headless mode'
    type: string
    default: 'true'

pool:
  name: 'DemoAgentPool'

variables:
  buildConfiguration: ${{ parameters.buildConfiguration }}
  HEADLESS_CHROME: ${{ parameters.headlessMode }}  # Use parameter value to control headless mode

steps:
- task: DotNetCoreCLI@2
  inputs:
    command: 'test'
